<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>24V to 5V Optocoupler Interface Circuit - Active High</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial,
          sans-serif;
        background-color: #f5f5f5;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background-color: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .header {
        margin-bottom: 30px;
      }

      .header h1 {
        font-size: 28px;
        margin-bottom: 8px;
        color: #1a1a1a;
      }

      .header p {
        color: #666;
        font-size: 14px;
      }

      .header .highlight {
        background-color: #fef3c7;
        padding: 8px 12px;
        border-radius: 4px;
        border-left: 4px solid #f59e0b;
        margin-top: 10px;
        font-weight: 600;
        color: #92400e;
      }

      .schematic-wrapper {
        width: 100%;
        border: 2px solid #d1d5db;
        border-radius: 8px;
        background-color: #f9fafb;
        padding: 20px;
        margin-bottom: 30px;
      }

      svg {
        width: 100%;
        height: auto;
      }

      .section-title {
        font-size: 20px;
        font-weight: bold;
        margin: 30px 0 15px 0;
        color: #1a1a1a;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
      }

      thead {
        background-color: #f3f4f6;
      }

      th,
      td {
        border: 1px solid #d1d5db;
        padding: 12px 16px;
        text-align: left;
      }

      th {
        font-weight: 600;
      }

      td:nth-child(2) {
        text-align: center;
      }

      .info-box {
        padding: 20px;
        border-radius: 8px;
        margin-top: 20px;
      }

      .info-box.blue {
        background-color: #eff6ff;
        border: 1px solid #bfdbfe;
      }

      .info-box.yellow {
        background-color: #fefce8;
        border: 1px solid #fde68a;
      }

      .info-box.green {
        background-color: #f0fdf4;
        border: 1px solid #bbf7d0;
      }

      .info-box h3 {
        font-size: 18px;
        margin-bottom: 12px;
        color: #1a1a1a;
      }

      .info-box ul {
        list-style: none;
        padding-left: 0;
      }

      .info-box li {
        margin-bottom: 10px;
        font-size: 14px;
        line-height: 1.6;
      }

      .info-box strong {
        color: #374151;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>24V to 5V Optocoupler Switch Interface</h1>
        <p>Single Channel Schematic (Replicate 8 times for all channels)</p>
        <div class="highlight">
          ✓ ACTIVE-HIGH OUTPUT: 24V ON = 5V OUT | 24V OFF = 0V OUT
        </div>
      </div>

      <!-- Schematic SVG -->
      <div class="schematic-wrapper">
        <svg viewBox="0 0 800 400">
          <!-- 24V Input Side -->
          <text
            x="40"
            y="30"
            style="font-size: 14px; font-weight: bold; fill: #1d4ed8"
          >
            24V INPUT SIDE
          </text>

          <!-- 24V+ terminal -->
          <circle cx="80" cy="100" r="5" fill="red" />
          <text
            x="50"
            y="95"
            style="font-size: 12px; font-weight: 600; fill: #dc2626"
          >
            24V+
          </text>

          <!-- Input resistor R1 -->
          <line
            x1="80"
            y1="100"
            x2="150"
            y2="100"
            stroke="black"
            stroke-width="2"
          />
          <rect
            x="150"
            y="85"
            width="60"
            height="30"
            fill="none"
            stroke="black"
            stroke-width="2"
          />
          <line
            x1="155"
            y1="90"
            x2="205"
            y2="110"
            stroke="black"
            stroke-width="1.5"
          />
          <line
            x1="155"
            y1="110"
            x2="205"
            y2="90"
            stroke="black"
            stroke-width="1.5"
          />
          <text x="160" y="78" style="font-size: 12px; font-weight: 600">
            R1
          </text>
          <text x="150" y="135" style="font-size: 12px">1.2kΩ</text>

          <!-- Wire to optocoupler anode -->
          <line
            x1="210"
            y1="100"
            x2="280"
            y2="100"
            stroke="black"
            stroke-width="2"
          />

          <!-- Optocoupler symbol - LED side (input) -->
          <line
            x1="280"
            y1="100"
            x2="310"
            y2="100"
            stroke="black"
            stroke-width="2"
          />
          <!-- LED triangle -->
          <polygon
            points="310,100 330,90 330,110"
            fill="none"
            stroke="black"
            stroke-width="2"
          />
          <!-- Cathode -->
          <line
            x1="330"
            y1="100"
            x2="360"
            y2="100"
            stroke="black"
            stroke-width="2"
          />
          <!-- LED arrows -->
          <line
            x1="315"
            y1="85"
            x2="325"
            y2="75"
            stroke="black"
            stroke-width="1.5"
          />
          <polygon points="325,75 322,78 328,78" fill="black" />
          <line
            x1="325"
            y1="85"
            x2="335"
            y2="75"
            stroke="black"
            stroke-width="1.5"
          />
          <polygon points="335,75 332,78 338,78" fill="black" />

          <!-- GND connection -->
          <line
            x1="360"
            y1="100"
            x2="360"
            y2="200"
            stroke="black"
            stroke-width="2"
          />
          <circle cx="360" cy="200" r="5" fill="black" />
          <text x="340" y="220" style="font-size: 12px; font-weight: 600">
            GND
          </text>

          <!-- Optocoupler package outline -->
          <rect
            x="270"
            y="70"
            width="110"
            height="180"
            fill="none"
            stroke="#2563eb"
            stroke-width="2"
            stroke-dasharray="5,5"
          />
          <text
            x="290"
            y="260"
            style="font-size: 12px; font-weight: 600; fill: #2563eb"
          >
            U1 (PC817)
          </text>

          <!-- Pin labels -->
          <circle cx="285" cy="100" r="3" fill="#2563eb" />
          <text
            x="260"
            y="105"
            style="font-size: 11px; font-weight: 600; fill: #2563eb"
          >
            1
          </text>
          <circle cx="365" cy="100" r="3" fill="#2563eb" />
          <text
            x="370"
            y="105"
            style="font-size: 11px; font-weight: 600; fill: #2563eb"
          >
            2
          </text>
          <circle cx="365" cy="190" r="3" fill="#2563eb" />
          <text
            x="370"
            y="195"
            style="font-size: 11px; font-weight: 600; fill: #2563eb"
          >
            3
          </text>
          <circle cx="305" cy="170" r="3" fill="#2563eb" />
          <text
            x="285"
            y="165"
            style="font-size: 11px; font-weight: 600; fill: #2563eb"
          >
            4
          </text>

          <!-- Phototransistor side (output) - RECONFIGURED FOR ACTIVE HIGH -->
          <!-- 5V+ to Collector -->
          <line
            x1="310"
            y1="170"
            x2="300"
            y2="170"
            stroke="black"
            stroke-width="2"
          />
          <line
            x1="300"
            y1="170"
            x2="300"
            y2="60"
            stroke="black"
            stroke-width="2"
          />
          <circle cx="300" cy="60" r="5" fill="green" />
          <text
            x="250"
            y="65"
            style="font-size: 12px; font-weight: 600; fill: #16a34a"
          >
            5V+
          </text>

          <!-- Transistor base line -->
          <line
            x1="330"
            y1="155"
            x2="330"
            y2="185"
            stroke="black"
            stroke-width="3"
          />
          <!-- Collector line -->
          <line
            x1="330"
            y1="170"
            x2="310"
            y2="150"
            stroke="black"
            stroke-width="2"
          />
          <!-- Emitter line -->
          <line
            x1="330"
            y1="170"
            x2="350"
            y2="190"
            stroke="black"
            stroke-width="2"
          />
          <polygon points="345,185 350,190 350,180" fill="black" />
          <!-- Emitter wire to output -->
          <line
            x1="350"
            y1="190"
            x2="350"
            y2="210"
            stroke="black"
            stroke-width="2"
          />
          <line
            x1="350"
            y1="210"
            x2="500"
            y2="210"
            stroke="black"
            stroke-width="2"
          />

          <!-- Light arrows -->
          <line
            x1="315"
            y1="140"
            x2="325"
            y2="150"
            stroke="black"
            stroke-width="1.5"
          />
          <polygon points="315,140 318,143 318,137" fill="black" />
          <line
            x1="325"
            y1="140"
            x2="335"
            y2="150"
            stroke="black"
            stroke-width="1.5"
          />
          <polygon points="325,140 328,143 328,137" fill="black" />

          <!-- 5V Output Side -->
          <text
            x="440"
            y="30"
            style="font-size: 14px; font-weight: bold; fill: #16a34a"
          >
            5V OUTPUT SIDE
          </text>

          <!-- Output node -->
          <circle cx="500" cy="210" r="4" fill="black" />
          <line
            x1="500"
            y1="210"
            x2="580"
            y2="210"
            stroke="black"
            stroke-width="2"
          />
          <circle cx="580" cy="210" r="5" fill="orange" />
          <text
            x="590"
            y="215"
            style="font-size: 12px; font-weight: 600; fill: #ea580c"
          >
            5V OUT
          </text>

          <!-- Pull-down resistor R2 -->
          <line
            x1="500"
            y1="210"
            x2="500"
            y2="260"
            stroke="black"
            stroke-width="2"
          />
          <rect
            x="485"
            y="260"
            width="30"
            height="60"
            fill="none"
            stroke="black"
            stroke-width="2"
          />
          <line
            x1="490"
            y1="265"
            x2="510"
            y2="315"
            stroke="black"
            stroke-width="1.5"
          />
          <line
            x1="490"
            y1="315"
            x2="510"
            y2="265"
            stroke="black"
            stroke-width="1.5"
          />
          <text x="520" y="285" style="font-size: 12px; font-weight: 600">
            R2
          </text>
          <text x="520" y="300" style="font-size: 12px">10kΩ</text>

          <!-- GND connection for pull-down -->
          <line
            x1="500"
            y1="320"
            x2="500"
            y2="340"
            stroke="black"
            stroke-width="2"
          />
          <circle cx="500" cy="340" r="5" fill="black" />
          <text x="480" y="360" style="font-size: 12px; font-weight: 600">
            GND
          </text>

          <!-- Voltage labels -->
          <text x="100" y="80" style="font-size: 12px; fill: #6b7280">
            Control
          </text>
          <text x="100" y="93" style="font-size: 12px; fill: #6b7280">
            Signal
          </text>

          <!-- Isolation barrier -->
          <line
            x1="400"
            y1="50"
            x2="400"
            y2="370"
            stroke="red"
            stroke-width="2"
            stroke-dasharray="10,5"
          />
          <text
            x="405"
            y="200"
            style="font-size: 12px; font-weight: bold; fill: #dc2626"
            transform="rotate(90 405 200)"
          >
            ISOLATION BARRIER
          </text>
        </svg>
      </div>

      <!-- Parts List -->
      <h2 class="section-title">PC817 Pinout Reference</h2>
      <div
        style="
          background-color: #f0f9ff;
          border: 2px solid #0ea5e9;
          border-radius: 8px;
          padding: 20px;
          margin-bottom: 30px;
        "
      >
        <div
          style="display: flex; align-items: center; gap: 30px; flex-wrap: wrap"
        >
          <div
            style="
              font-family: monospace;
              font-size: 16px;
              background: white;
              padding: 20px;
              border-radius: 4px;
              border: 1px solid #bae6fd;
            "
          >
            <div
              style="text-align: center; margin-bottom: 10px; font-weight: bold"
            >
              Top View
            </div>
            <pre style="margin: 0">
    ┌─────────┐
24V │    ●    │← Pin 1 indicator
 ───┤1 Anode 4├─── 5V+
GND │         │
 ───┤2 Cath  3├─── 5V OUT
    └─────────┘
    </pre
            >
          </div>
          <div>
            <table style="border-collapse: collapse">
              <thead style="background-color: #0ea5e9; color: white">
                <tr>
                  <th style="border: 1px solid #0284c7; padding: 8px">Pin</th>
                  <th style="border: 1px solid #0284c7; padding: 8px">
                    Function
                  </th>
                  <th style="border: 1px solid #0284c7; padding: 8px">
                    Connects To
                  </th>
                </tr>
              </thead>
              <tbody style="background: white">
                <tr>
                  <td
                    style="
                      border: 1px solid #bae6fd;
                      padding: 8px;
                      text-align: center;
                      font-weight: bold;
                    "
                  >
                    1
                  </td>
                  <td style="border: 1px solid #bae6fd; padding: 8px">
                    Anode (LED+)
                  </td>
                  <td style="border: 1px solid #bae6fd; padding: 8px">
                    24V+ through R1 (1.2kΩ)
                  </td>
                </tr>
                <tr>
                  <td
                    style="
                      border: 1px solid #bae6fd;
                      padding: 8px;
                      text-align: center;
                      font-weight: bold;
                    "
                  >
                    2
                  </td>
                  <td style="border: 1px solid #bae6fd; padding: 8px">
                    Cathode (LED-)
                  </td>
                  <td style="border: 1px solid #bae6fd; padding: 8px">
                    GND (24V side)
                  </td>
                </tr>
                <tr>
                  <td
                    style="
                      border: 1px solid #bae6fd;
                      padding: 8px;
                      text-align: center;
                      font-weight: bold;
                    "
                  >
                    3
                  </td>
                  <td style="border: 1px solid #bae6fd; padding: 8px">
                    Emitter
                  </td>
                  <td style="border: 1px solid #bae6fd; padding: 8px">
                    5V OUT (and R2 to GND)
                  </td>
                </tr>
                <tr>
                  <td
                    style="
                      border: 1px solid #bae6fd;
                      padding: 8px;
                      text-align: center;
                      font-weight: bold;
                    "
                  >
                    4
                  </td>
                  <td style="border: 1px solid #bae6fd; padding: 8px">
                    Collector
                  </td>
                  <td style="border: 1px solid #bae6fd; padding: 8px">5V+</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <h2 class="section-title">Parts List (Per Channel)</h2>
      <table>
        <thead>
          <tr>
            <th>Ref</th>
            <th>Component</th>
            <th>Value/Part#</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>U1</td>
            <td>8 Channel Optocoupler</td>
            <td>PC817</td>
            <td>4-pin DIP optocoupler, CTR 50-600%</td>
          </tr>
          <tr>
            <td>R1</td>
            <td>Resistor</td>
            <td>1.2kΩ 1/4W</td>
            <td>Input current limiting (~18mA @ 24V)</td>
          </tr>
          <tr>
            <td>R2</td>
            <td>Resistor</td>
            <td>10kΩ 1/4W</td>
            <td>Pull-down resistor for 5V output</td>
          </tr>
        </tbody>
      </table>

      <h2 class="section-title">Complete System (8 Channels)</h2>
      <table>
        <thead>
          <tr>
            <th>Component</th>
            <th>Quantity</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>PC817 8 Channel Optocoupler</td>
            <td>1</td>
            <td>One per tool</td>
          </tr>
          <tr>
            <td>1.2kΩ 1/4W Resistor</td>
            <td>8</td>
            <td>Input side current limiting</td>
          </tr>
          <tr>
            <td>10kΩ 1/4W Resistor</td>
            <td>8</td>
            <td>Output pull-down</td>
          </tr>
        </tbody>
      </table>

      <!-- What Changed 
      <div class="info-box green">
        <h3>✓ What Changed for Active-High Output</h3>
        <ul>
          <li>
            <strong>Collector connection:</strong> Now connected directly to 5V+
            (not to output)
          </li>
          <li>
            <strong>Emitter connection:</strong> Now connected to output (not to
            GND)
          </li>
          <li>
            <strong>Pull-down resistor:</strong> Changed from pull-up (to 5V) to
            pull-down (to GND)
          </li>
          <li>
            <strong>Resistor value:</strong> Increased to 10kΩ to limit current
            when transistor conducts
          </li>
          <li>
            <strong>Result:</strong> Logic is now non-inverted - 24V ON gives 5V
            OUT, 24V OFF gives 0V OUT
          </li>
        </ul>
      </div>-->

      <!-- Operation Notes -->
      <div class="info-box blue">
        <h3>Operation</h3>
        <ul>
          <li>
            <strong>24V ON:</strong> Current flows through LED → Phototransistor
            conducts → 5V flows from collector through emitter to output → 5V
            OUT goes HIGH (~4.8V)
          </li>
          <li>
            <strong>24V OFF:</strong> No LED current → Phototransistor off (open
            circuit) → Pull-down R2 pulls output to GND → 5V OUT goes LOW (~0V)
          </li>
          <li>
            <strong>Isolation:</strong> 2.5kV typical between input and output
            sides
          </li>
          <li>
            <strong>Response time:</strong> ~4µs typical (adequate for most
            switching applications)
          </li>
        </ul>
      </div>

      <!-- Design Notes -->
      <div class="info-box yellow">
        <h3>Design Notes</h3>
        <ul>
          <li>
            <strong>R1 calculation:</strong> (24V - 1.2V LED drop) / 1.2kΩ ≈
            18mA (safe for PC817)
          </li>
          <li>
            <strong>R2 value:</strong> 10kΩ limits current to ~0.5mA when
            transistor is ON. Can use 4.7kΩ-22kΩ range
          </li>
          <li>
            <strong>Output voltage HIGH:</strong> Approximately 5V - Vce(sat) ≈
            4.8V (acceptable for 5V logic)
          </li>
          <li>
            <strong>Output voltage LOW:</strong> Near 0V when transistor is OFF
          </li>
          <li>
            <strong>Alternative IC:</strong> Can use TLP181, HCPL-2531, or
            similar optocouplers
          </li>
          <li>
            <strong>PCB layout:</strong> Keep 24V and 5V sections separated for
            isolation
          </li>
        </ul>
      </div>
    </div>
  </body>
</html>
